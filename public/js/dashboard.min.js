let globalChannel=document.getElementById("pageInfo").getAttribute("data-channel"),loggedInUser=document.getElementById("pageInfo").getAttribute("data-loggedIn"),enviroment=document.getElementById("pageInfo").getAttribute("data-enviroment");Sentry.init({dsn:"https://32998bbe6f964551a6680d9343ae5270@o421094.ingest.sentry.io/5340398",enviroment:enviroment}),Sentry.configureScope((function(scope){scope.setUser({username:"loggedInUser"})})),document.addEventListener("click",e=>{if(e.target.matches("#connect-btn")){console.log("clicked"),e.preventDefault();var xhr=new XMLHttpRequest;xhr.open("post",`/api/connect?channel=${globalChannel}`),xhr.onload=function(){200===xhr.status?(swal,Swal.fire({type:"success",title:"Vibey joined your channel!",showConfirmButton:!1,timer:2e3,timerProgressBar:!0}).then(reload=>{reload&&location.reload()})):409===xhr.status?Swal.fire({type:"error",title:"Vibey is already connected to your channel"}):Swal.fire({type:"error",title:"Error joining channel!",text:`${xhr.responseText}`})},xhr.send()}}),document.addEventListener("click",e=>{if(e.target.matches("#disconnect-btn")){e.preventDefault();var xhr=new XMLHttpRequest;xhr.open("DELETE",`/api/disconnect?channel=${globalChannel}`),xhr.onload=function(){if(200===xhr.status)try{Swal.fire({type:"success",title:"Vibey left your channel!",showConfirmButton:!1,timer:2e3,timerProgressBar:!0}).then(reload=>{reload&&location.reload()})}catch(err){console.error(err)}else Swal.fire({type:"error",title:"Error leaving channel!",text:`${xhr.responseText}`})},xhr.send()}});